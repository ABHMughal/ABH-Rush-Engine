<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-100</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x = view_xview[0]
y = view_yview[0]

audio_play_sound(snd_whoosh,1,false)

phase = 1

x_info = 40
y_info = 80

bar_alpha = 0

button_state = 0
button_alpha = 0

y_upperoverlay = -38
y_loweroverlay = 324

x_stageclear = -150
y_stageclear = 100


x_timeoffset = -150
y_timeoffset = 90


x_ringoffset = -150
y_ringoffset = 120


x_enemyoffset = -150
y_enemyoffset = 150

x_scoreoffset = -150
y_scoreoffset = 210

x_time = 520
x_ring = 520
x_enemy = 520


if obj_Sonic.character == "Sonic"
{
    audio_play_sound(bgm_stageclear_Sonic,0,false)
    alarm[1] = 360
}
else if obj_Sonic.character == "Shadow"
{
    audio_play_sound(bgm_stageclear_Shadow,0,false)
    alarm[1] = 420
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 11
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var rank = instance_create(x + 347, y + 208,obj_result_rank)

if global.score_made &lt; 35000
    rank.image_index = 1
if global.score_made &lt; 25000
    rank.image_index = 2
if global.score_made &lt; 15000
    rank.image_index = 3
if global.score_made &lt; 5000
    rank.image_index = 4
    
alarm[4] = 180
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 9
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_play_sound(bgm_result,0,false)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 3
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x = view_xview[0]
y = view_yview[0]


if bar_alpha &lt; 1
    bar_alpha += 0.05
if phase &gt;= 4
{
    if y_upperoverlay &lt; 0
        y_upperoverlay += 2
    else
        y_upperoverlay = 0
    
    if y_loweroverlay &gt; 256
        y_loweroverlay -= 2
    else
        y_loweroverlay = 256
}

if phase == 1
{
    x_stageclear += 12
    if x_stageclear &gt;= 125
    {
        x_stageclear = 125
        phase = 2
        alarm[0] = 120
    }
}
if phase == 2
{
    /*
    y_upperoverlay = y - 38
    y_loweroverlay = y + 324

    x_timeoffset = x - 150
    y_timeoffset = y + 90

    x_ringoffset = x - 150
    y_ringoffset = y + 120

    x_enemyoffset = x - 150
    y_enemyoffset = y + 150

    x_scoreoffset = x - 150
    y_scoreoffset = y + 210
    */
}
if phase == 3
{
    y_stageclear -= 3
    if y_stageclear &lt;= 32
    {
        phase = 4
    }
}

if phase == 4
{
    x_timeoffset += 12
    x_time -= 12
    if x_timeoffset &gt;= x_info
        phase = 5
}

if phase == 5
{
    x_ringoffset += 12
    x_ring -= 12
    if x_ringoffset &gt;= x_info
        phase = 6
}

if phase == 6
{
    x_enemyoffset += 12
    x_enemy -= 12
    if x_enemyoffset &gt;= x_info
        phase = 7
}

if phase == 7
{
    x_scoreoffset += 12
    if x_scoreoffset &gt;= x_info
    {    
        phase = 8
        alarm[2] = 60
    }
}

if phase == 9
{
    if global.rings_collected &gt; 0
    {
        global.rings_collected -= 50
        global.score_made += 50
    }
    if global.time_bonus &gt; 0
    {
        global.time_bonus -= 50
        global.score_made += 50
    }
    if global.enemies &gt; 0
    {
        global.enemies -= 50
        global.score_made += 50
    }
    
    if !audio_is_playing(snd_pointsadd)
        audio_play_sound(snd_pointsadd,1,false)
    
    if global.rings_collected == 0 &amp;&amp; global.time_bonus == 0 &amp;&amp; global.enemies == 0 
    {
        audio_play_sound(snd_cashregister2,1,false)
        phase = 10
        alarm[3] = 180
    }
}

if phase == 11
{
    if button_state == 0
    {
        button_alpha += 0.05
        if button_alpha &gt;= 1
            button_state = 1
    }
    else 
    {
       button_alpha -= 0.05
        if button_alpha &lt;= 0
            button_state = 0 
    }
    if keyboard_check_pressed(ord('S')) || gamepad_button_check_pressed(0,gp_face1)
    {
        audio_stop_all()
        instance_create(x + 228, y + 128,obj_resultscreen_blackfadein)
        audio_play_sound(snd_menuconfirm,1,false)
    }
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var index = 0
var colour = make_colour_rgb(0,90,225)
if instance_exists(obj_Sonic)
{
    if obj_Sonic.character == "Shadow"
    {
        index = 1
        colour = make_colour_rgb(128,0,0)
    }
}

draw_sprite_ext(spr_resultscreen_upper,index,x,y + y_upperoverlay,1,1,0,c_white,1)
draw_sprite_ext(spr_resultscreen_lower,index,x,y + y_loweroverlay,1,1,0,c_white,1)

draw_sprite_ext(spr_titlecard_stagenameoverlay,0,x,y + y_stageclear + 5,1,0.6,0,c_white,bar_alpha)

draw_set_font(font_stagetitle)
draw_text_outline_ext(x + x_stageclear,y + y_stageclear,"Stage Clear",2,colour,c_white,1,1)

draw_set_font(font_ingame)

draw_text_outline_ext(x + x_timeoffset, y + y_timeoffset,"Time Bonus",1,colour,c_white,1,1)
draw_text_outline_ext(x + x_time, y + y_timeoffset,global.time_bonus,1,colour,c_white,1,1)

draw_text_outline_ext(x + x_ringoffset, y + y_ringoffset,"Ring Bonus",1,colour,c_white,1,1)
draw_text_outline_ext(x + x_ring, y + y_ringoffset,global.rings_collected,1,colour,c_white,1,1)


draw_text_outline_ext(x + x_enemyoffset, y + y_enemyoffset,"Enemy",1,colour,c_white,1,1)
draw_text_outline_ext(x + x_enemy, y + y_enemyoffset,global.enemies,1,colour,c_white,1,1)

var button_sprite = spr_qte_keys
if obj_Sonic.input_mode == 1
    button_sprite = spr_qte_xboxbuttons
draw_sprite_ext(button_sprite,1,x+428,y+222,1,1,0,c_white,button_alpha)

draw_text_outline_ext(x + x_scoreoffset,y + y_scoreoffset,"Score   " + string(global.score_made),1,colour,c_white,1,1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
